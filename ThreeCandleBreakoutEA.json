{
    "three_candle_breakout_ea": {
        "name": "Three Candle Breakout EA",
        "description": "Trading strategy that enters on breakouts after specific three-candle patterns",
        "version": "1.0",
        "user_config": {
            "symbol": "AAA",
            "lot_size": 0.1,
            "trading_hours": {"start": 8, "end": 13},
            "ema_period": 10
        },
        "risk_parameters": {
            "stop_loss_ticks": 20,
            "take_profit_ratio": 2.0
        },
        "account_rules": {
            "max_risk_per_trade_percent": 2,
            "position_sizing": {
                "method": "fixed_lots",
                "value": 0.1
            }
        },
        "aggregates": ["candles_AAA_5M"],
        "calculations": [
            {
                "name": "moving_avg",
                "type": "exponential",
                "by": "trade",
                "period": "10",
                "symbol": "AAA"
            }
        ],
        "rules": [
            {
                "id": "buy_setup",
                "condition": {
                    "operator": "and",
                    "operands": [
                        ["lt", ["candle", 3, "close"], ["candle", 3, "open"]],
                        ["lt", ["candle", 2, "close"], ["candle", 2, "open"]],
                        ["gt", ["candle", 1, "close"], ["candle", 1, "open"]],
                        ["gt", ["candle", 1, "close"], ["max", ["candle", 2, "high"], ["candle", 3, "high"]]],
                        ["gt", ["candle", 1, "close"], ["indicator", "ema", 1]]
                    ]
                }
            },
            {
                "id": "sell_setup",
                "condition": {
                    "operator": "and",
                    "operands": [
                        ["gt", ["candle", 3, "close"], ["candle", 3, "open"]],
                        ["gt", ["candle", 2, "close"], ["candle", 2, "open"]],
                        ["lt", ["candle", 1, "close"], ["candle", 1, "open"]],
                        ["lt", ["candle", 1, "close"], ["min", ["candle", 2, "low"], ["candle", 3, "low"]]],
                        ["lt", ["candle", 1, "close"], ["indicator", "ema", 1]]
                    ]
                }
            }
        ],
        "actions": [
            {
                "id": "buy_action",
                "trigger": {
                    "rule": "buy_setup"
                },
                "type": "open_position",
                "direction": "buy",
                "entry": "market",
                "symbol": ["config", "symbol"],
                "stop_loss": ["subtract", ["candle", 1, "low"], [1, "tick"]],
                "take_profit": ["multiply_distance", 2, "stop_loss"]
            },
            {
                "id": "sell_action",
                "trigger": {
                    "rule": "sell_setup"
                },
                "type": "open_position",
                "direction": "sell",
                "entry": "market",
                "symbol": ["config", "symbol"],
                "stop_loss": ["add", ["candle", 1, "high"], [1, "tick"]],
                "take_profit": ["multiply_distance", 2, "stop_loss"]
            }
        ],
        "risk_management": {
            "max_positions": 1,
            "position_sizing": ["fixed_lots", ["config", "user_config.lot_size"]],
            "trading_hours": {
                "start": ["config", "user_config.trading_hours.start"],
                "end": ["config", "user_config.trading_hours.end"]
            }
        }
        
    }
}